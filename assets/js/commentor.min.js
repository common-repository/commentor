jQuery(document).ready(function(e){function o(o,t){if("true"!==e(".commentor").attr("data-is-user-logged-in")){if(!localStorage.getItem("commentor_user_name")||!localStorage.getItem("commentor_user_email"))return e(".commentor .guest-popup-container").removeClass("hidden"),!1;o.name=localStorage.getItem("commentor_user_name"),o.email=localStorage.getItem("commentor_user_email")}o.action="commentor_create_comment",o.wp_nonce=ajax_data.nonce,o.post_id=e("input#postId").val(),e.ajax({type:"POST",url:ajax_data.ajax_url,data:o,success:function(e){e.success,t(e)},error:function(e,o,n){t(!1)}})}function t(o){e(".commentor-notice").html(o),e(".commentor-notice").removeClass("hidden"),setTimeout(function(){e(".commentor-notice").addClass("hidden")},3e3)}e(document).on("click",".commentor .input-box button",function(){let n=e(".commentor .input-box textarea");o({message:n.val()},function(e){!1!==e&&(t(e.data.message),e.success&&n.val(""))})}),e(document).on("emoji-click",".commentor .input-box emoji-picker",function(o){let{unicode:t}=o.detail,n=e(".commentor .input-box textarea");n.val(n.val()+t).focus()}),e(document).on("click",".commentor .input-box .emoji-selector",function(){e(".commentor .input-box .emoji-container").toggleClass("hidden")}),e(document).on("click",".commentor .comments comment .load-replies",function(){let o=e(this).attr("data-comment-id");e('comment[data-id="'+o+'"] .replies').removeClass("hidden"),e(this).remove()}),e(document).on("click",".commentor .reply-box",function(){e(".reply-box").removeClass("focused"),e(this).closest(".reply-box").addClass("focused")}),e(document).on("click",function(o){let t=e(".commentor .reply-box").is(o.target)||e(".commentor .reply-box").has(o.target).length>0;t||e(".commentor .reply-box").removeClass("focused")}),e(document).on("emoji-click",".commentor .reply-box emoji-picker",function(o){let t=e(this).closest(".reply-box").find("input");t.val(t.val()+o.detail.unicode).focus()}),e(document).on("click",".commentor .reply-box .emoji-selector",function(){let o=e(this).closest(".reply-box").find(".emoji-container");o.toggleClass("hidden")}),e(document).on("click",".commentor .reply-box .send",function(){let n=e(this);n.addClass("disabled");let c=n.closest(".reply-box").find("input"),m=n.closest("comment").attr("data-id");o({message:c.val(),reply_to:m},function(e){!1!==e&&(t(e.data.message),e.success&&c.val(""))})}),e(document).on("click",".commentor comment .likes",function(){let o=e(this);if(o.hasClass("disabled"))return!1;o.addClass("disabled");let n=o.attr("data-comment-id"),c={action:"commentor_like_comment",wp_nonce:ajax_data.nonce,comment_id:n};e.ajax({type:"POST",url:ajax_data.ajax_url,data:c,success:function(e){e.success&&o.html(e.data.current_total),t(e.data.message),o.removeClass("disabled")},error:function(e,t,n){o.removeClass("disabled")}})}),e(document).on("click",".commentor .guest-popup-container .guest-popup button",function(){let o=e(".commentor .guest-popup-container .guest-popup .name").attr("data-error-message"),n=e(".commentor .guest-popup-container .guest-popup .email").attr("data-error-message"),c=e(".commentor .guest-popup-container .guest-popup .name input"),m=e(".commentor .guest-popup-container .guest-popup .email input");return""===c.val()?(t(o),!1):""===m.val()?(t(n),!1):void(localStorage.setItem("commentor_user_name",c.val()),localStorage.setItem("commentor_user_email",m.val()),e(".commentor .guest-popup-container").addClass("hidden"),c.val(""),m.val(""))});let n=1;e(document).on("click",".commentor .load-more-comments button",function(){let o=e(this);o.find(".icon").removeClass("hidden");let t={action:"commentor_load_comments",wp_nonce:ajax_data.nonce,post_id:e("input#postId").val(),page:n+1};e.post(ajax_data.ajax_url,t,function(t){t.success&&(n++,o.find(".icon").addClass("hidden"),e(".commentor .comments").append(t.data.html),t.data.has_more||o.remove())})})});